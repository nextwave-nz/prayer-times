<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin ‚Äî Hamilton Masjid</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=DM+Serif+Display&display=swap" rel="stylesheet">
    <style>
        :root{--night:#0c1a2e;--gold:#d4a843;--gold-light:#e8c876;--cream:#f5f0e8;--teal:#2a9d8f;--coral:#e07a5f;--text-dark:#1a1a2e;--text-mid:#4a4a6a;--text-light:#8a8aa0}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'DM Sans',sans-serif;background:var(--cream);min-height:100vh;color:var(--text-dark)}
        .admin-header{background:var(--night);color:#fff;padding:24px 20px;text-align:center}
        .admin-header h1{font-family:'DM Serif Display',serif;font-size:1.5em;color:var(--gold-light);margin-bottom:4px}
        .admin-header p{font-size:.82em;opacity:.5}
        .admin-content{max-width:600px;margin:24px auto;padding:0 16px 40px}
        .card{background:#fff;border-radius:16px;padding:24px;margin-bottom:16px;box-shadow:0 4px 24px rgba(12,26,46,.06);border:1px solid rgba(0,0,0,.04)}
        .card h2{font-family:'DM Serif Display',serif;font-size:1.15em;color:var(--night);margin-bottom:16px;display:flex;align-items:center;gap:8px}
        .form-group{margin-bottom:16px}
        .form-group label{display:block;font-size:.78em;font-weight:600;text-transform:uppercase;letter-spacing:.08em;color:var(--text-light);margin-bottom:6px}
        .form-group input,.form-group textarea{width:100%;padding:12px 14px;border:2px solid rgba(0,0,0,.08);border-radius:10px;font-family:'DM Sans',sans-serif;font-size:.92em;color:var(--text-dark);transition:border-color .2s;background:#fff}
        .form-group input:focus,.form-group textarea:focus{outline:none;border-color:var(--teal)}
        .form-group .hint{font-size:.72em;color:var(--text-light);margin-top:4px}
        .btn-row{display:flex;gap:10px;margin-top:20px}
        .btn{flex:1;padding:14px;border-radius:12px;font-family:'DM Sans',sans-serif;font-weight:700;font-size:.88em;cursor:pointer;border:none;transition:all .2s;text-align:center}
        .btn:active{transform:scale(.97)}
        .btn-primary{background:var(--night);color:var(--gold-light)}
        .btn-secondary{background:var(--cream);color:var(--text-mid);border:2px solid rgba(0,0,0,.08)}
        .preview-card{display:flex;align-items:center;gap:10px;padding:12px 14px;border-radius:12px;background:linear-gradient(135deg,#e3f2fd,#bbdefb);border:1px solid rgba(33,150,243,.12);font-size:.82em;line-height:1.4;margin-top:12px}
        .preview-card .pc-icon{font-size:1.3em;flex-shrink:0}
        .preview-card .pc-sub{font-size:.85em;color:var(--text-light);font-style:italic}
        .status{padding:10px 14px;border-radius:8px;margin-top:12px;font-size:.82em;font-weight:600;display:none}
        .status.show{display:block}
        .status.success{background:#e8f5e9;color:#2e7d32}
        .code-block{background:var(--night);color:#e0e0e0;padding:14px;border-radius:10px;margin-top:12px;font-family:'Courier New',monospace;font-size:.75em;line-height:1.6;overflow-x:auto;white-space:pre;max-height:200px;overflow-y:auto}
        .instructions{background:#fffbf0;border:2px solid rgba(212,168,67,.2);border-radius:12px;padding:16px;margin-bottom:16px}
        .instructions h3{font-size:.88em;color:var(--night);margin-bottom:8px}
        .instructions ol{margin:0;padding:0 0 0 20px;font-size:.82em;color:var(--text-mid);line-height:1.8}
        .instructions ol li strong{color:var(--night)}
        .tab-bar{display:flex;gap:3px;background:var(--cream);padding:3px;border-radius:10px;margin-bottom:20px}
        .tab{flex:1;padding:10px;border:none;border-radius:8px;font-family:'DM Sans',sans-serif;font-weight:600;font-size:.85em;cursor:pointer;background:transparent;color:var(--text-mid);transition:all .2s;text-align:center}
        .tab.active{background:var(--night);color:var(--gold-light)}
        .tab-content{display:none}.tab-content.active{display:block}
        .option-cards{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px}
        .option-card{border:2px solid rgba(0,0,0,.08);border-radius:12px;padding:20px;text-align:center;cursor:pointer;transition:all .2s}
        .option-card.selected{border-color:var(--teal);background:#e8f8f5}
        .option-card .oc-icon{font-size:1.5em;margin-bottom:6px;display:block}
        .option-card .oc-title{font-weight:700;font-size:1em;color:var(--text-dark)}
        .option-card .oc-desc{font-size:.75em;color:var(--text-light);margin-top:4px;line-height:1.4}
        .day-preview{background:var(--cream);border-radius:10px;padding:14px;margin-top:12px}
        .day-preview-title{font-weight:700;font-size:.9em;color:var(--night)}
        .day-preview p{color:var(--text-mid);margin-top:4px;font-size:.82em}
    </style>
</head>
<body>
    <div class="admin-header">
        <h1>üïå Admin Panel</h1>
        <p>Hamilton Masjid ‚Äî Ramadan & Eid Management</p>
    </div>
    <div class="admin-content">
        <div class="instructions">
            <h3>üìã How it works</h3>
            <ol>
                <li>Make your changes below</li>
                <li>Click <strong>"Generate & Download"</strong></li>
                <li>Upload the downloaded JSON file to <strong>/Hamilton/</strong> on GitHub</li>
                <li>Changes go live instantly!</li>
            </ol>
        </div>
        <div class="tab-bar">
            <button class="tab active" onclick="switchTab('ramadan')">üåô Ramadan</button>
            <button class="tab" onclick="switchTab('eid')">üïå Eid Info</button>
        </div>

        <!-- RAMADAN TAB -->
        <div class="tab-content active" id="tabRamadan">
            <div class="card">
                <h2>üåô Ramadan Duration</h2>
                <p style="font-size:.85em;color:var(--text-mid);margin-bottom:16px">
                    The calendar defaults to 30 days. If the moon is sighted on the 29th night, select 29 days and upload the config.
                </p>
                <div class="option-cards">
                    <div class="option-card" id="opt29" onclick="selectDuration(29)">
                        <span class="oc-icon">üåô</span>
                        <div class="oc-title">29 Days</div>
                        <div class="oc-desc">Last fast: Fri, Mar 20<br>Eid: Sat, Mar 21</div>
                    </div>
                    <div class="option-card selected" id="opt30" onclick="selectDuration(30)">
                        <span class="oc-icon">üåô</span>
                        <div class="oc-title">30 Days</div>
                        <div class="oc-desc">Last fast: Sat, Mar 21<br>Eid: Sun, Mar 22</div>
                    </div>
                </div>
                <div class="day-preview" id="ramadanPreview">
                    <div class="day-preview-title">üìÖ 30 days ‚Äî Feb 20 to Mar 21</div>
                    <p>Eid ul Fitr: Sunday, March 22</p>
                </div>
                <div class="btn-row">
                    <button class="btn btn-primary" onclick="generateRamadanConfig()">‚öôÔ∏è Generate & Download</button>
                </div>
                <div class="status" id="ramadanStatus"></div>
                <div class="code-block" id="ramadanJson" style="display:none"></div>
            </div>
        </div>

        <!-- EID TAB -->
        <div class="tab-content" id="tabEid">
            <div class="card">
                <h2>üïå Eid ul Fitr Salaat</h2>
                <div class="form-group">
                    <label>Location / Venue</label>
                    <input type="text" id="eidLocation" value="Claudelands Event Centre">
                </div>
                <div class="form-group">
                    <label>Date</label>
                    <input type="text" id="eidDate" placeholder="e.g. Sunday, March 22, 2026">
                    <div class="hint">Leave empty if not confirmed</div>
                </div>
                <div class="form-group">
                    <label>Time</label>
                    <input type="text" id="eidTime" placeholder="e.g. 8:30 AM">
                    <div class="hint">Leave empty if not confirmed</div>
                </div>
                <div class="form-group">
                    <label>Parking Information</label>
                    <input type="text" id="eidParking" placeholder="e.g. Free parking at Brooklyn Road entrance">
                </div>
                <div class="form-group">
                    <label>Additional Notes</label>
                    <textarea id="eidNotes" rows="3" placeholder="e.g. Bring your own prayer mat. Eid breakfast provided."></textarea>
                </div>
                <div class="preview-card">
                    <span class="pc-icon">üïå</span>
                    <div id="eidPreviewContent">
                        <strong>Eid ul Fitr Salaat</strong> ‚Äî Claudelands Event Centre<br>
                        <span class="pc-sub">Date & time to be confirmed</span>
                    </div>
                </div>
                <div class="btn-row">
                    <button class="btn btn-primary" onclick="generateEidConfig()">‚öôÔ∏è Generate & Download</button>
                    <button class="btn btn-secondary" onclick="resetEid()">üîÑ Reset</button>
                </div>
                <div class="status" id="eidStatus"></div>
                <div class="code-block" id="eidJson" style="display:none"></div>
            </div>
        </div>
    </div>
    <script>
        var selectedDuration = 30;
        function switchTab(tab){
            document.querySelectorAll('.tab').forEach(function(t){t.classList.remove('active')});
            document.querySelectorAll('.tab-content').forEach(function(c){c.classList.remove('active')});
            document.querySelectorAll('.tab')[tab==='ramadan'?0:1].classList.add('active');
            document.getElementById(tab==='ramadan'?'tabRamadan':'tabEid').classList.add('active');
        }
        function selectDuration(days){
            selectedDuration=days;
            document.getElementById('opt29').classList.toggle('selected',days===29);
            document.getElementById('opt30').classList.toggle('selected',days===30);
            document.getElementById('ramadanPreview').innerHTML=days===29
                ?'<div class="day-preview-title">üìÖ 29 days ‚Äî Feb 20 to Mar 20</div><p>Eid ul Fitr: Saturday, March 21</p>'
                :'<div class="day-preview-title">üìÖ 30 days ‚Äî Feb 20 to Mar 21</div><p>Eid ul Fitr: Sunday, March 22</p>';
        }
        function generateRamadanConfig(){
            var config={totalDays:selectedDuration,endDate:selectedDuration===29?'2026-03-20':'2026-03-21',updated:new Date().toISOString()};
            var json=JSON.stringify(config,null,2);
            document.getElementById('ramadanJson').textContent=json;
            document.getElementById('ramadanJson').style.display='block';
            downloadJSON(json,'ramadan-config.json');
            showStatus('ramadanStatus','success','‚úÖ Downloaded! Upload ramadan-config.json to /Hamilton/ on GitHub');
        }
        ['eidLocation','eidDate','eidTime','eidParking'].forEach(function(id){
            document.getElementById(id).addEventListener('input',updateEidPreview);
        });
        function updateEidPreview(){
            var loc=document.getElementById('eidLocation').value||'Claudelands Event Centre';
            var subs=[];
            var d=document.getElementById('eidDate').value;if(d)subs.push(d);
            var t=document.getElementById('eidTime').value;if(t)subs.push(t);
            var p=document.getElementById('eidParking').value;if(p)subs.push('üÖøÔ∏è '+p);
            document.getElementById('eidPreviewContent').innerHTML='<strong>Eid ul Fitr Salaat</strong> ‚Äî '+loc+'<br><span class="pc-sub">'+(subs.length?subs.join(' ¬∑ '):'Date & time to be confirmed')+'</span>';
        }
        function generateEidConfig(){
            var config={location:document.getElementById('eidLocation').value||'Claudelands Event Centre',date:document.getElementById('eidDate').value||'',time:document.getElementById('eidTime').value||'',parking:document.getElementById('eidParking').value||'',notes:document.getElementById('eidNotes').value||'',updated:new Date().toISOString()};
            var json=JSON.stringify(config,null,2);
            document.getElementById('eidJson').textContent=json;
            document.getElementById('eidJson').style.display='block';
            downloadJSON(json,'eid-config.json');
            showStatus('eidStatus','success','‚úÖ Downloaded! Upload eid-config.json to /Hamilton/ on GitHub');
        }
        function resetEid(){
            document.getElementById('eidLocation').value='Claudelands Event Centre';
            ['eidDate','eidTime','eidParking','eidNotes'].forEach(function(id){document.getElementById(id).value=''});
            document.getElementById('eidJson').style.display='none';updateEidPreview();
        }
        function downloadJSON(json,filename){
            var b=new Blob([json],{type:'application/json'});var u=URL.createObjectURL(b);
            var a=document.createElement('a');a.href=u;a.download=filename;document.body.appendChild(a);a.click();
            setTimeout(function(){document.body.removeChild(a);URL.revokeObjectURL(u)},200);
        }
        function showStatus(id,type,msg){
            var el=document.getElementById(id);el.className='status '+type+' show';el.textContent=msg;
            if(msg)setTimeout(function(){el.classList.remove('show')},8000);
        }
        // Load existing configs
        try{fetch('eid-config.json?t='+Date.now()).then(function(r){if(r.ok)return r.json();throw''}).then(function(c){
            if(c.location)document.getElementById('eidLocation').value=c.location;
            if(c.date)document.getElementById('eidDate').value=c.date;
            if(c.time)document.getElementById('eidTime').value=c.time;
            if(c.parking)document.getElementById('eidParking').value=c.parking;
            if(c.notes)document.getElementById('eidNotes').value=c.notes;
            updateEidPreview();
        }).catch(function(){})}catch(e){}
        try{fetch('ramadan-config.json?t='+Date.now()).then(function(r){if(r.ok)return r.json();throw''}).then(function(c){
            if(c.totalDays)selectDuration(c.totalDays);
        }).catch(function(){})}catch(e){}
    </script>
</body>
</html>
