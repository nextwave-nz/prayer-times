<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Hamilton Masjid â€” Prayer Times 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500;600&family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

        :root {
            --navy:    #0d1b2a;
            --navy-mid:#1b2d42;
            --gold:    #c9a84c;
            --gold-lt: #e8c97a;
            --cream:   #faf7f2;
            --text:    #1a2332;
            --muted:   #5a6a7a;
            --fajr:    #2e7fd4;
            --dhuhr:   #c8860a;
            --asr:     #3a8a3a;
            --mag:     #c24d2c;
            --isha:    #7b5ea7;
            --fajr-p:  #7dbde8;
            --dhuhr-p: #f5c869;
            --asr-p:   #88dd88;
            --mag-p:   #ff9070;
            --isha-p:  #c8aaff;
        }

        body {
            font-family:'DM Sans',sans-serif;
            background:var(--cream);
            color:var(--text);
            min-height:100vh;
        }

        /* â”€â”€ HEADER â”€â”€ */
        .header { background:var(--navy); position:relative; overflow:hidden; }
        .header::before {
            content:''; position:absolute; inset:0;
            background:radial-gradient(ellipse at 70% 50%, rgba(201,168,76,.12) 0%, transparent 70%);
            pointer-events:none;
        }
        .header-inner {
            max-width:960px; margin:0 auto;
            padding:28px 16px 20px;
            position:relative; z-index:1;
        }
        .header-arabic {
            font-family:'Amiri',serif;
            font-size:clamp(1em,2.5vw,1.4em);
            color:var(--gold-lt); direction:rtl; margin-bottom:10px;
        }
        .header-title {
            font-family:'DM Serif Display',serif;
            font-size:clamp(1.5em,4vw,2.4em);
            color:white; line-height:1.2; margin-bottom:10px;
        }
        .header-meta { display:flex; flex-wrap:wrap; gap:14px; align-items:center; }
        .meta-pill {
            display:flex; align-items:center; gap:6px;
            color:rgba(255,255,255,.7); font-size:.85em;
        }
        .gold-rule {
            height:3px;
            background:linear-gradient(90deg,var(--gold) 0%,transparent 100%);
            margin-top:20px;
        }

        /* â”€â”€ MONTH TABS â”€â”€ */
        .tabs-bar {
            background:var(--navy-mid);
            position:sticky; top:0; z-index:50;
            box-shadow:0 2px 12px rgba(0,0,0,.2);
        }
        .tabs-inner { max-width:960px; margin:0 auto; display:flex; padding:0 16px; }
        .tab-btn {
            flex:1; padding:14px 10px;
            background:none; border:none;
            color:rgba(255,255,255,.45);
            font-family:'DM Sans',sans-serif;
            font-size:.88em; font-weight:500;
            cursor:pointer; position:relative;
            transition:color .2s; text-align:center;
        }
        .tab-btn::after {
            content:''; position:absolute; bottom:0; left:50%;
            transform:translateX(-50%);
            width:0; height:3px; background:var(--gold);
            border-radius:3px 3px 0 0; transition:width .25s ease;
        }
        .tab-btn.active { color:var(--gold-lt); }
        .tab-btn.active::after { width:calc(100% - 20px); }
        .tab-btn:hover:not(.active) { color:rgba(255,255,255,.75); }
        .tab-hijri { display:block; font-size:.72em; opacity:.65; margin-top:2px; font-weight:400; }

        /* â”€â”€ CONTENT â”€â”€ */
        .content { max-width:960px; margin:0 auto; padding:16px; }
        .month-panel { display:none; }
        .month-panel.active { display:block; animation:fadeIn .3s ease; }
        @keyframes fadeIn {
            from { opacity:0; transform:translateY(6px); }
            to   { opacity:1; transform:translateY(0); }
        }

        /* â”€â”€ TODAY CARD â”€â”€ */
        .today-card {
            background:linear-gradient(135deg,var(--navy) 0%,var(--navy-mid) 100%);
            border:1px solid rgba(201,168,76,.3);
            border-radius:14px; padding:18px;
            margin-bottom:16px; color:white; display:none;
        }
        .today-card.visible { display:block; }
        .today-card-header {
            display:flex; justify-content:space-between;
            align-items:center; margin-bottom:14px;
            flex-wrap:wrap; gap:8px;
        }
        .today-label {
            background:var(--gold); color:var(--navy);
            font-size:.7em; font-weight:700;
            letter-spacing:.1em; text-transform:uppercase;
            padding:4px 12px; border-radius:20px;
        }
        .today-date-text {
            font-family:'DM Serif Display',serif;
            font-size:1.1em; color:var(--gold-lt);
        }
        .today-prayers { display:grid; grid-template-columns:repeat(5,1fr); gap:8px; }
        @media(max-width:500px) { .today-prayers { grid-template-columns:repeat(3,1fr); } }
        .today-prayer-item {
            background:rgba(255,255,255,.07);
            border-radius:10px; padding:12px 6px;
            text-align:center; border:1px solid rgba(255,255,255,.08);
        }
        .today-prayer-name {
            font-size:.68em; text-transform:uppercase;
            letter-spacing:.06em; opacity:.65; margin-bottom:6px;
        }
        .today-prayer-time {
            font-size:1.05em; font-weight:700;
            font-variant-numeric:tabular-nums; line-height:1.2;
        }
        .today-prayer-ampm { font-size:.68em; font-weight:500; opacity:.75; margin-top:3px; }
        /* Bright pastels on dark today card */
        .today-prayer-item .fajr-c    { color:var(--fajr-p); }
        .today-prayer-item .dhuhr-c   { color:var(--dhuhr-p); }
        .today-prayer-item .asr-c     { color:var(--asr-p); }
        .today-prayer-item .maghrib-c { color:var(--mag-p); }
        .today-prayer-item .isha-c    { color:var(--isha-p); }

        /* â”€â”€ INFO BANNER â”€â”€ */
        .info-banner {
            background:var(--navy-mid); color:white;
            border-radius:10px; padding:12px 16px; margin-bottom:14px;
            display:flex; flex-wrap:wrap; gap:10px;
            align-items:center; justify-content:space-between; font-size:.83em;
        }
        .info-item { color:rgba(255,255,255,.8); }
        .info-item strong { color:var(--gold-lt); }

        /* â”€â”€ VIEW TOGGLE â”€â”€ */
        .view-toggle {
            display:flex; margin-bottom:16px;
            background:var(--navy-mid);
            border-radius:12px; padding:5px; gap:4px;
        }
        .view-btn {
            flex:1; padding:10px 12px; border:none;
            background:transparent; color:rgba(255,255,255,.5);
            border-radius:9px; font-family:'DM Sans',sans-serif;
            font-weight:600; font-size:.86em; cursor:pointer;
            transition:all .25s ease; letter-spacing:.02em;
            display:flex; align-items:center; justify-content:center; gap:7px;
        }
        .btn-icon { width:18px; height:18px; flex-shrink:0; }
        .view-btn.active {
            background:var(--gold); color:var(--navy);
            box-shadow:0 2px 8px rgba(201,168,76,.4);
        }
        .view-btn:hover:not(.active) { color:rgba(255,255,255,.85); background:rgba(255,255,255,.08); }
        .view-btn:active { transform:scale(.97); }

        /* â”€â”€ CARD / TABLE VISIBILITY â”€â”€ */
        .card-section  { display:none; }
        .table-section { display:none; }
        .card-section.active  { display:block; }
        .table-section.active { display:block; }

        /* â”€â”€ DAY CARDS â”€â”€ */
        .day-card {
            background:white; margin-bottom:10px;
            border-radius:12px; overflow:hidden;
            box-shadow:0 2px 8px rgba(0,0,0,.08);
            border-left:4px solid #e0e0e0;
        }
        .day-card.row-today {
            border-left:4px solid var(--gold);
            box-shadow:0 4px 16px rgba(201,168,76,.25);
        }
        .day-header {
            background:#f8f9fa; padding:13px 14px;
            display:flex; justify-content:space-between;
            align-items:center; cursor:pointer; user-select:none;
        }
        .day-card.row-today .day-header { background:linear-gradient(90deg,#fffbea,#fff5cc); }
        .day-title { font-weight:600; color:var(--navy); font-size:.95em; }
        .day-card.row-today .day-title { color:#1a1200; }
        .day-subtitle { font-size:.78em; color:var(--muted); margin-top:2px; }
        .expand-icon { font-size:1em; transition:transform .3s; color:var(--gold); }
        .day-card.expanded .expand-icon { transform:rotate(180deg); }
        .day-content { display:none; padding:12px 14px; animation:expandDown .25s ease; }
        @keyframes expandDown {
            from { opacity:0; transform:translateY(-6px); }
            to   { opacity:1; transform:translateY(0); }
        }
        .day-card.row-today .day-content,
        .day-card.expanded  .day-content { display:block; }
        .prayer-grid-mobile { display:grid; grid-template-columns:repeat(2,1fr); gap:8px; }
        .prayer-item-mobile {
            padding:10px 12px; background:#f8f9fa;
            border-radius:8px; display:flex;
            justify-content:space-between; align-items:center;
            border:1px solid #eee;
        }
        .p-name { font-size:.78em; color:var(--muted); font-weight:500; }
        .p-time { font-size:1em; font-weight:700; font-variant-numeric:tabular-nums; }
        .p-ampm { font-size:.72em; color:var(--muted); margin-left:2px; font-weight:400; }

        /* Prayer colours */
        .fajr-c    { color:var(--fajr); }
        .dhuhr-c   { color:var(--dhuhr); }
        .asr-c     { color:var(--asr); }
        .maghrib-c { color:var(--mag); }
        .isha-c    { color:var(--isha); }

        /* â”€â”€ TABLE â€” fully responsive, no horizontal scroll â”€â”€ */
        .table-wrap { border-radius:14px; overflow:hidden; box-shadow:0 4px 20px rgba(0,0,0,.08); }
        table { width:100%; border-collapse:collapse; background:white; table-layout:fixed; }
        thead tr { background:var(--navy-mid); color:white; }
        th {
            padding:12px 4px; text-align:center;
            font-weight:600; font-size:.75em;
            letter-spacing:.03em; text-transform:uppercase;
        }
        th.col-date-th { width:24%; text-align:left; padding-left:10px; }
        th.prayer-fajr    { color:#6dbfff; }
        th.prayer-dhuhr   { color:#f5c869; }
        th.prayer-asr     { color:#88dd88; }
        th.prayer-maghrib { color:#ff9070; }
        th.prayer-isha    { color:#c8aaff; }

        td { padding:11px 4px; text-align:center; border-bottom:1px solid #f0f0f0; }
        tbody tr:last-child td { border-bottom:none; }
        tbody tr:nth-child(even) { background:#fafafa; }
        tbody tr.row-today {
            background:linear-gradient(90deg,#fffbea,#fff5cc) !important;
            border-left:4px solid var(--gold);
        }
        tbody tr.row-today td { font-weight:600; color:#1a1200; }
        tbody tr.row-friday .col-date { color:var(--mag); }

        .col-date { font-weight:600; color:var(--text); font-size:.82em; text-align:left; padding-left:10px; }
        .day-abbr { font-weight:400; color:var(--muted); font-size:.85em; }
        .time-cell { font-weight:700; font-variant-numeric:tabular-nums; font-size:.85em; }
        .time-ampm { display:block; font-size:.72em; font-weight:400; color:var(--muted); margin-top:1px; }
        tbody tr.row-today .time-ampm { color:rgba(26,18,0,.5); }

        /* â”€â”€ LEGEND â”€â”€ */
        .legend {
            display:flex; flex-wrap:wrap; gap:10px;
            margin-top:16px; padding:14px 16px;
            background:white; border-radius:10px;
            box-shadow:0 2px 8px rgba(0,0,0,.05);
        }
        .legend-item { display:flex; align-items:center; gap:7px; font-size:.78em; color:var(--muted); }
        .legend-dot { width:12px; height:12px; border-radius:3px; flex-shrink:0; }

        /* â”€â”€ NOTES â”€â”€ */
        .notes-box {
            margin-top:16px; background:#fffdf5;
            border:1px solid #e8d99a; border-left:4px solid var(--gold);
            border-radius:10px; padding:14px 16px;
            font-size:.83em; color:#5a4a10; line-height:1.7;
        }
        .notes-box strong { color:#3a2e08; display:block; margin-bottom:5px; }

        /* â”€â”€ FOOTER â”€â”€ */
        .footer {
            background:var(--navy); color:rgba(255,255,255,.5);
            text-align:center; padding:22px 16px;
            font-size:.8em; margin-top:36px;
        }
        .footer strong { color:rgba(255,255,255,.8); }
    </style>
</head>
<body>

<!-- HEADER -->
<div class="header">
    <div class="header-inner">
        <div class="header-arabic">Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© â€” Ù‡Ø§Ù…ÙŠÙ„ØªÙˆÙ†</div>
        <h1 class="header-title">Hamilton Masjid<br>Prayer Times 2026</h1>
        <div class="header-meta">
            <span class="meta-pill">
                <svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"/><circle cx="12" cy="10" r="3"/></svg>
                921 Heaphy Terrace, Hamilton
            </span>
            <span class="meta-pill">
                <svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                Friday Khutbah: 1:40 PM
            </span>
        </div>
        <div class="gold-rule"></div>
    </div>
</div>

<!-- MONTH TABS -->
<div class="tabs-bar">
    <div class="tabs-inner">
        <button class="tab-btn" id="tab-feb" onclick="switchMonth('feb')">
            February 2026
            <span class="tab-hijri">Sha'ban â€“ Ramadan 1447</span>
        </button>
        <button class="tab-btn" id="tab-mar" onclick="switchMonth('mar')">
            March 2026
            <span class="tab-hijri">Ramadan â€“ Shawwal 1447</span>
        </button>
    </div>
</div>

<!-- CONTENT -->
<div class="content">

    <!-- â”€â”€ FEBRUARY â”€â”€ -->
    <div class="month-panel" id="panel-feb">
        <div class="today-card" id="today-card-feb">
            <div class="today-card-header">
                <span class="today-label">Today</span>
                <span class="today-date-text" id="today-date-feb"></span>
            </div>
            <div class="today-prayers" id="today-prayers-feb"></div>
        </div>
        <div class="info-banner">
            <div class="info-item">ðŸ“… <strong>February 2026</strong> â€” Sha'ban &amp; Ramadan 1447H</div>
            <div class="info-item">All times are <strong>Iqama</strong> times</div>
        </div>
        <div class="view-toggle">
            <button class="view-btn active" id="card-btn-feb" onclick="switchView('feb','card')">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
                Card View
            </button>
            <button class="view-btn" id="table-btn-feb" onclick="switchView('feb','table')">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/><line x1="9" y1="3" x2="9" y2="21"/></svg>
                Table View
            </button>
        </div>
        <div class="card-section active" id="card-feb"><div id="cards-feb"></div></div>
        <div class="table-section" id="table-feb">
            <div class="table-wrap">
                <table>
                    <thead><tr>
                        <th class="col-date-th">Date</th>
                        <th class="prayer-fajr">Fajr</th>
                        <th class="prayer-dhuhr">Dhuhr</th>
                        <th class="prayer-asr">Asr</th>
                        <th class="prayer-maghrib">Maghrib</th>
                        <th class="prayer-isha">Isha</th>
                    </tr></thead>
                    <tbody id="tbody-feb"></tbody>
                </table>
            </div>
        </div>
        <div class="legend">
            <div class="legend-item"><div class="legend-dot" style="background:#fffbea;border:1.5px solid #c9a84c;"></div>Today</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--fajr);"></div>Fajr</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--dhuhr);"></div>Dhuhr</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--asr);"></div>Asr</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--mag);"></div>Maghrib</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--isha);"></div>Isha</div>
        </div>
        <div class="notes-box">
            <strong>ðŸ“Œ Notes</strong>
            Iqama times carry forward until the next change. Islamic dates are subject to moon sighting.
            3 minutes has been added to Ramadan Maghrib Iqama time.
        </div>
    </div>

    <!-- â”€â”€ MARCH â”€â”€ -->
    <div class="month-panel" id="panel-mar">
        <div class="today-card" id="today-card-mar">
            <div class="today-card-header">
                <span class="today-label">Today</span>
                <span class="today-date-text" id="today-date-mar"></span>
            </div>
            <div class="today-prayers" id="today-prayers-mar"></div>
        </div>
        <div class="info-banner">
            <div class="info-item">ðŸ“… <strong>March 2026</strong> â€” Ramadan &amp; Shawwal 1447H</div>
            <div class="info-item">All times are <strong>Iqama</strong> times</div>
        </div>
        <div class="view-toggle">
            <button class="view-btn active" id="card-btn-mar" onclick="switchView('mar','card')">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
                Card View
            </button>
            <button class="view-btn" id="table-btn-mar" onclick="switchView('mar','table')">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/><line x1="9" y1="3" x2="9" y2="21"/></svg>
                Table View
            </button>
        </div>
        <div class="card-section active" id="card-mar"><div id="cards-mar"></div></div>
        <div class="table-section" id="table-mar">
            <div class="table-wrap">
                <table>
                    <thead><tr>
                        <th class="col-date-th">Date</th>
                        <th class="prayer-fajr">Fajr</th>
                        <th class="prayer-dhuhr">Dhuhr</th>
                        <th class="prayer-asr">Asr</th>
                        <th class="prayer-maghrib">Maghrib</th>
                        <th class="prayer-isha">Isha</th>
                    </tr></thead>
                    <tbody id="tbody-mar"></tbody>
                </table>
            </div>
        </div>
        <div class="legend">
            <div class="legend-item"><div class="legend-dot" style="background:#fffbea;border:1.5px solid #c9a84c;"></div>Today</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--fajr);"></div>Fajr</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--dhuhr);"></div>Dhuhr</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--asr);"></div>Asr</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--mag);"></div>Maghrib</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--isha);"></div>Isha</div>
        </div>
        <div class="notes-box">
            <strong>ðŸ“Œ Notes</strong>
            Iqama times carry forward until the next change. Asr is based on single shadow (double shadow is 40 mins later).
            5 minutes allowed between end of Suhoor and Fajr. Islamic dates are subject to moon sighting.
        </div>
    </div>

</div>

<!-- FOOTER -->
<div class="footer">
    <strong>Source:</strong> Waikato Muslim Association Prayer Timetable 2026 &amp; FIANZ
</div>

<script>
// â”€â”€ DATA: Iqama times only, empty = carry forward â”€â”€
const feb = [
    {date:"Feb 1",  day:"Sun", fajrIq:"5:20", dhuhrIq:"1:50", asrIq:"5:40", magIq:"8:40",  ishaIq:"10:05"},
    {date:"Feb 2",  day:"Mon", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"8:35",  ishaIq:""},
    {date:"Feb 3",  day:"Tue", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 4",  day:"Wed", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 5",  day:"Thu", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:"10:00"},
    {date:"Feb 6",  day:"Fri", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 7",  day:"Sat", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 8",  day:"Sun", fajrIq:"5:30",  dhuhrIq:"",     asrIq:"",     magIq:"8:30",  ishaIq:""},
    {date:"Feb 9",  day:"Mon", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:"9:55"},
    {date:"Feb 10", day:"Tue", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 11", day:"Wed", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 12", day:"Thu", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 13", day:"Fri", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"8:25",  ishaIq:"9:50"},
    {date:"Feb 14", day:"Sat", fajrIq:"5:40",  dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 15", day:"Sun", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 16", day:"Mon", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 17", day:"Tue", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:"9:45"},
    {date:"Feb 18", day:"Wed", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 19", day:"Thu", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 20", day:"Fri", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 21", day:"Sat", fajrIq:"5:50",  dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:"9:40"},
    {date:"Feb 22", day:"Sun", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 23", day:"Mon", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"8:20",  ishaIq:""},
    {date:"Feb 24", day:"Tue", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 25", day:"Wed", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 26", day:"Thu", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:""},
    {date:"Feb 27", day:"Fri", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"",      ishaIq:"9:30"},
    {date:"Feb 28", day:"Sat", fajrIq:"",      dhuhrIq:"",     asrIq:"",     magIq:"8:15",  ishaIq:""},
];

const mar = [
    {date:"Mar 1",  day:"Sun", fajrIq:"5:50", dhuhrIq:"1:50", asrIq:"5:20", magIq:"8:15", ishaIq:"9:30"},
    {date:"Mar 2",  day:"Mon", fajrIq:"6:00", dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 3",  day:"Tue", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"8:10", ishaIq:""},
    {date:"Mar 4",  day:"Wed", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 5",  day:"Thu", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:"9:20"},
    {date:"Mar 6",  day:"Fri", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"8:05", ishaIq:""},
    {date:"Mar 7",  day:"Sat", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 8",  day:"Sun", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 9",  day:"Mon", fajrIq:"6:10", dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 10", day:"Tue", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"8:00", ishaIq:""},
    {date:"Mar 11", day:"Wed", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:"9:10"},
    {date:"Mar 12", day:"Thu", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 13", day:"Fri", fajrIq:"",     dhuhrIq:"",     asrIq:"5:10", magIq:"7:55", ishaIq:""},
    {date:"Mar 14", day:"Sat", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 15", day:"Sun", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 16", day:"Mon", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"7:50", ishaIq:""},
    {date:"Mar 17", day:"Tue", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:"9:00"},
    {date:"Mar 18", day:"Wed", fajrIq:"6:20", dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 19", day:"Thu", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 20", day:"Fri", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"7:45", ishaIq:""},
    {date:"Mar 21", day:"Sat", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 22", day:"Sun", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 23", day:"Mon", fajrIq:"",     dhuhrIq:"",     asrIq:"5:00", magIq:"",     ishaIq:"8:50"},
    {date:"Mar 24", day:"Tue", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"7:35", ishaIq:""},
    {date:"Mar 25", day:"Wed", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 26", day:"Thu", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 27", day:"Fri", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"7:30", ishaIq:""},
    {date:"Mar 28", day:"Sat", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 29", day:"Sun", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
    {date:"Mar 30", day:"Mon", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"7:25", ishaIq:""},
    {date:"Mar 31", day:"Tue", fajrIq:"",     dhuhrIq:"",     asrIq:"",     magIq:"",     ishaIq:""},
];

// AM/PM: Fajr is 4â€“6 AM, everything else is PM
function ampm(t) {
    if (!t || t === 'â€”') return '';
    const h = parseInt(t.split(':')[0]);
    return (h >= 4 && h <= 6) ? 'AM' : 'PM';
}

// Carry-forward Iqama times
function resolveIqama(data) {
    let last = {fajrIq:'â€”', dhuhrIq:'â€”', asrIq:'â€”', magIq:'â€”', ishaIq:'â€”'};
    return data.map(r => {
        if (r.fajrIq)  last.fajrIq  = r.fajrIq;
        if (r.dhuhrIq) last.dhuhrIq = r.dhuhrIq;
        if (r.asrIq)   last.asrIq   = r.asrIq;
        if (r.magIq)   last.magIq   = r.magIq;
        if (r.ishaIq)  last.ishaIq  = r.ishaIq;
        return { date:r.date, day:r.day, ...last };
    });
}

function isToday(dateStr) {
    const [mon, d] = dateStr.split(' ');
    const m = {Feb:1, Mar:2}[mon];
    return new Date(2026, m, parseInt(d)).toDateString() === new Date().toDateString();
}

function buildTable(data, tbodyId) {
    const tbody = document.getElementById(tbodyId);
    resolveIqama(data).forEach(r => {
        const today = isToday(r.date);
        const tr = document.createElement('tr');
        if (today) tr.classList.add('row-today');
        if (r.day === 'Fri') tr.classList.add('row-friday');
        tr.innerHTML = `
            <td class="col-date">${r.date} <span class="day-abbr">${r.day}</span></td>
            <td class="time-cell fajr-c">${r.fajrIq}<span class="time-ampm">${ampm(r.fajrIq)}</span></td>
            <td class="time-cell dhuhr-c">${r.dhuhrIq}<span class="time-ampm">${ampm(r.dhuhrIq)}</span></td>
            <td class="time-cell asr-c">${r.asrIq}<span class="time-ampm">${ampm(r.asrIq)}</span></td>
            <td class="time-cell maghrib-c">${r.magIq}<span class="time-ampm">${ampm(r.magIq)}</span></td>
            <td class="time-cell isha-c">${r.ishaIq}<span class="time-ampm">${ampm(r.ishaIq)}</span></td>
        `;
        tbody.appendChild(tr);
    });
}

function buildCards(data, containerId) {
    const container = document.getElementById(containerId);
    resolveIqama(data).forEach(r => {
        const today = isToday(r.date);
        const div = document.createElement('div');
        div.className = 'day-card' + (today ? ' row-today' : '');
        div.innerHTML = `
            <div class="day-header" onclick="toggleCard(this)">
                <div>
                    <div class="day-title">${r.date} <span style="font-weight:400;color:var(--muted);font-size:.88em;">${r.day}</span></div>
                </div>
                <div class="expand-icon">â–¼</div>
            </div>
            <div class="day-content">
                <div class="prayer-grid-mobile">
                    <div class="prayer-item-mobile">
                        <span class="p-name">Fajr</span>
                        <span class="p-time fajr-c">${r.fajrIq} <span class="p-ampm">${ampm(r.fajrIq)}</span></span>
                    </div>
                    <div class="prayer-item-mobile">
                        <span class="p-name">Dhuhr</span>
                        <span class="p-time dhuhr-c">${r.dhuhrIq} <span class="p-ampm">${ampm(r.dhuhrIq)}</span></span>
                    </div>
                    <div class="prayer-item-mobile">
                        <span class="p-name">Asr</span>
                        <span class="p-time asr-c">${r.asrIq} <span class="p-ampm">${ampm(r.asrIq)}</span></span>
                    </div>
                    <div class="prayer-item-mobile">
                        <span class="p-name">Maghrib</span>
                        <span class="p-time maghrib-c">${r.magIq} <span class="p-ampm">${ampm(r.magIq)}</span></span>
                    </div>
                    <div class="prayer-item-mobile" style="grid-column:1/-1;">
                        <span class="p-name">Isha</span>
                        <span class="p-time isha-c">${r.ishaIq} <span class="p-ampm">${ampm(r.ishaIq)}</span></span>
                    </div>
                </div>
            </div>
        `;
        container.appendChild(div);
    });
}

function buildTodayCard(data, cardId, dateId, prayersId) {
    const r = resolveIqama(data).find(x => isToday(x.date));
    if (!r) return;
    document.getElementById(cardId).classList.add('visible');
    document.getElementById(dateId).textContent = `${r.day}, ${r.date}`;
    const prayers = [
        {name:'Fajr',    time:r.fajrIq,  cls:'fajr-c'},
        {name:'Dhuhr',   time:r.dhuhrIq, cls:'dhuhr-c'},
        {name:'Asr',     time:r.asrIq,   cls:'asr-c'},
        {name:'Maghrib', time:r.magIq,   cls:'maghrib-c'},
        {name:'Isha',    time:r.ishaIq,  cls:'isha-c'},
    ];
    document.getElementById(prayersId).innerHTML = prayers.map(p => `
        <div class="today-prayer-item">
            <div class="today-prayer-name">${p.name}</div>
            <div class="today-prayer-time ${p.cls}">${p.time}</div>
            <div class="today-prayer-ampm">${ampm(p.time)}</div>
        </div>
    `).join('');
}

function toggleCard(header) { header.parentElement.classList.toggle('expanded'); }

function switchView(month, view) {
    document.getElementById('card-btn-'  + month).classList.toggle('active', view === 'card');
    document.getElementById('table-btn-' + month).classList.toggle('active', view === 'table');
    document.getElementById('card-'  + month).classList.toggle('active', view === 'card');
    document.getElementById('table-' + month).classList.toggle('active', view === 'table');
}

function switchMonth(month) {
    document.querySelectorAll('.month-panel').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('panel-' + month).classList.add('active');
    document.getElementById('tab-'   + month).classList.add('active');
}

function autoSelectMonth() {
    const m = new Date().getMonth();
    switchMonth(m === 1 ? 'feb' : m === 2 ? 'mar' : 'feb');
}

buildTable(feb, 'tbody-feb');
buildTable(mar, 'tbody-mar');
buildCards(feb, 'cards-feb');
buildCards(mar, 'cards-mar');
buildTodayCard(feb, 'today-card-feb', 'today-date-feb', 'today-prayers-feb');
buildTodayCard(mar, 'today-card-mar', 'today-date-mar', 'today-prayers-mar');
autoSelectMonth();
</script>
</body>
</html>
